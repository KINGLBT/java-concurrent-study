# Java的内存模型（JMM）

由于并行程序比串行程序复杂得多，并发程序中数据访问的一致性和安全性受到严重挑战。为了保证多个线程间可以高效地，正确地协同工作，需要再定义
一种规则，而JMM也就为此而生。

JMM的关键技术点都是围绕着多线程的原子性，可见性和有序性来建立的

## 原子性（Atomicity）

原子性指一个操作不可中断。即使是多个线程一起执行的时候，一个操作一旦开始，就不会被其他线程干扰。

例如：全局静态变量 int i;两个线程同时对它赋值，线程A给1，线程B给-1，那么i的值要么是1，要么是-1，不会存在其他值。给整形变量赋值的这个操作
就是原子性，不可被打断。

那么有没有不是原子性操作的呢？
在32位系统中，对long 类型变量就行赋值，就是非原子操作的。对于32位操作系统来说，单次次操作能处理的最长长度为32bit，而long类型8字节64bit，
所以对long的读写都要两条指令才能完成（即每次读写64bit中的32bit）。

### long 原子性检测
1、在64位JVM中，使用多线程对long型变量赋值，并读取查看是否正确


2、在32位JVM中，使用多线程对long型变量赋值，并读取查看是否正确



## 可见性（Visibility）

## 有序性（Ordering）